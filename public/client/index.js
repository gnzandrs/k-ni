!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}var e=a("./models/Game"),f=d(e),g=a("./models/Boot"),h=d(g),i=(new f.default).get(),j=new h.default(i);i.state.add("boot",j),i.state.start("boot")},{"./models/Boot":2,"./models/Game":3}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./factory/HeroWidgetFactory"),h=d(g),i=a("./factory/EnemyWidgetFactory"),j=d(i),k=function(){function a(){e(this,a)}return f(a,[{key:"contructor",value:function(a){this.game=a}},{key:"preload",value:function(){this.hero=h.default.CreateCharacter(this.game),this.enemy=j.default.CreateCharacter(this.game),this.game.load.tilemap("dungeon","../../design/map.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.image("tiles","../../design/map.png")}},{key:"create",value:function(){this.attackTime=0,this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.world.setBounds(0,0,3e3,3e3),this.cursors=this.game.input.keyboard.createCursorKeys(),this.keyboard=this.game.input.keyboard,this.map=this.game.add.tilemap("dungeon"),this.map.addTilesetImage("base","tiles"),this.layerFloor=this.map.createLayer("floor"),this.layerWallCollision=this.map.createLayer("wall"),this.layerStoneCollision=this.map.createLayer("stone_down"),this.layerStone=this.map.createLayer("stone_up"),this.layerFire=this.map.createLayer("fire"),this.map.setCollisionBetween(1,100,!0,"wall"),this.map.setCollisionBetween(1,100,!0,"stone_down"),this.layerFloor.resizeWorld(),this.layerWallCollision.resizeWorld(),this.layerStoneCollision.resizeWorld(),this.layerStone.resizeWorld(),this.layerFire.resizeWorld(),this.game.physics.arcade.enable([this.hero.getSprite(),this.layerStoneCollision,this.layerWallCollision],Phaser.Physics.ARCADE),this.hero.addAnimation(),this.hero.getSprite().body.collideWorldBounds=!0,this.timeKeyDown=null;var a=this.game.input.keyboard.addKey(Phaser.Keyboard.A);a.onDown.add(function(){this.timeKeyDown=this.game.time.now},this),a.onUp.add(function(){},this),this.game.camera.follow(this.hero.getSprite(),Phaser.Camera.FOLLOW_LOCKON,.1,.1)}},{key:"update",value:function(){this.game.physics.arcade.collide(this.hero.getSprite(),this.layerStoneCollision),this.game.physics.arcade.collide(this.hero.getSprite(),this.layerWallCollision),this.hero.setVelocityZero(),this.hero.setOnKeyPress(!1),this.cursors.left.isDown&&this.hero.moveLeft(),this.cursors.right.isDown&&this.hero.moveRight(),this.cursors.up.isDown&&this.hero.moveUp(),this.cursors.down.isDown&&this.hero.moveDown(),this.keyboard.isDown(Phaser.Keyboard.A)&&this.cursors.left.isDown&&this.game.time.now-this.timeKeyDown<150?this.hero.attack(!0):this.keyboard.isDown(Phaser.Keyboard.A)&&this.cursors.right.isDown&&this.game.time.now-this.timeKeyDown<150?this.hero.attack(!0):this.keyboard.isDown(Phaser.Keyboard.A)&&this.game.time.now-this.timeKeyDown<150&&this.hero.attack(!1),0==this.hero.getOnKeyPress()&&this.hero.stop()}}]),a}();c.default=k},{"./factory/EnemyWidgetFactory":6,"./factory/HeroWidgetFactory":7}],3:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c,e){d(this,a),this.game=new Phaser.Game(600,600,Phaser.AUTO,"game-area")}return e(a,[{key:"get",value:function(){return this.game}}]),a}();c.default=f},{}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=200,g=200,h=function(){function a(b){d(this,a),this.game=b,this.game.load.spritesheet("knight-walk","./assets/axe_animation.png",100,100),this.faceLeft=!1,this.sprite=null,this.onKeyPress=!1}return e(a,[{key:"getSprite",value:function(){return null==this.sprite&&(this.sprite=this.game.add.sprite(50,60,"knight-walk")),this.sprite}},{key:"addAnimation",value:function(){this.sprite.scale.setTo(1/1.8,1/1.8),this.sprite.animations.add("walk-right",[3,4,3,5],9,!0),this.sprite.animations.add("walk-left",[7,6,7,8],9,!0),this.sprite.animations.add("attack-right",[0,1,2],10,!0),this.sprite.animations.add("attack-left",[9,10,11],10,!0),this.sprite.animations.add("attack-right-walk",[1,2],10,!0),this.sprite.animations.add("attack-left-walk",[10,11],10,!0)}},{key:"jump",value:function(){}},{key:"run",value:function(){}},{key:"moveLeft",value:function(){this.onKeyPress=!0,this.faceLeft=!0,this.sprite.body.velocity.x=-f,this.sprite.animations.play("walk-left")}},{key:"moveRight",value:function(){this.onKeyPress=!0,this.faceLeft=!1,this.sprite.body.velocity.x=f,this.sprite.animations.play("walk-right")}},{key:"moveUp",value:function(){this.onKeyPress=!0,this.sprite.body.velocity.y=-g,this.faceLeft?this.sprite.animations.play("walk-left"):this.sprite.animations.play("walk-right")}},{key:"moveDown",value:function(){this.onKeyPress=!0,this.sprite.body.velocity.y=g,this.faceLeft?this.sprite.animations.play("walk-left"):this.sprite.animations.play("walk-right")}},{key:"getOnKeyPress",value:function(){return this.onKeyPress}},{key:"setOnKeyPress",value:function(a){this.onKeyPress=a}},{key:"attack",value:function(a){this.onKeyPress=!0,console.log("iswalking.."+a),a&&this.faceLeft?this.sprite.animations.play("attack-left-walk"):a&&!this.faceLeft?this.sprite.animations.play("attack-right-walk"):this.faceLeft?(this.sprite.animations.play("attack-left"),this.sprite.animations.currentAnim.onComplete.add(function(){this.sprite.frame=7,console.log("attack-left!")})):(this.sprite.animations.play("attack-right"),this.sprite.animations.currentAnim.onComplete.add(function(){this.sprite.frame=3,console.log("attack-right!")}))}},{key:"stop",value:function(){this.sprite.animations.stop()}},{key:"setVelocityZero",value:function(){this.sprite.body.velocity.x=0,this.sprite.body.velocity.y=0}}]),a}();c.default=h},{}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),console.log("abstract factory constructor..")}return e(a,[{key:"CreateCharacter",value:function(a){}}]),a}();c.default=f},{}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./CharacterWidgetFactory"),j=d(i),k=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this))}return g(b,a),h(b,null,[{key:"CreateCharacter",value:function(a){console.log("create enemy..")}}]),b}(j.default);c.default=k},{"./CharacterWidgetFactory":5}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./CharacterWidgetFactory"),j=d(i),k=a("../character/Hero"),l=d(k),m=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this))}return g(b,a),h(b,null,[{key:"CreateCharacter",value:function(a){return console.log("create hero.."),new l.default(a)}}]),b}(j.default);c.default=m},{"../character/Hero":4,"./CharacterWidgetFactory":5}]},{},[1]);
//# sourceMappingURL=../../sourceMap.map